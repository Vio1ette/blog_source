##### 1. 对于每个数据成员

如果数据成员类型的长度为$M$，指定的（默认）对齐值为$N$，则实际的对齐值为$q=min(M,N)$，成员的开始地址必须为`q`的倍数

##### 2. 结构体整体大小

每个数据成员的内存分配完成后，检查结构体整体的大小是否为$r=min(max(M),N)$的整数倍，`r`是最大数据成员的大小和结构体默认对齐值中的较小者

> C++中可用#pragma_pack(N)调整默认对齐值

##### 3. 结构体中存在数组

数组的对齐值为单个数组元素的对齐值，而不是数组的整体大小

```cpp
struct {
  char c;
  char ary[4];
  short s;
};
```

假设默认对齐值比所有数据成员都大。c占1字节，ary数组元素类型为char，其对齐值为1字节，所以c和ary一共占5字节，short的对齐值为2字节，其开始地址必须为2的倍数，所以需要在ary后插入1字节的对齐数据，再安放short s。现在结构体总共占8字节，而结构体中最大的数据类型为short，即2字节，8是2的倍数，所以不需要再对齐了。

##### 4. 嵌套结构体

跟数组类似，嵌套结构体的对齐值跟结构体整体大小无关，而是上面提到过的`r`

```cpp
struct sstOne{
  char c;		//1字节
  char ary[4];  //5字节
  short s;  	//2字节
};
struct stTwo{
  int n; 		//4字节
  stOne one;    //占用8字节，对齐值为2字节
};
```

