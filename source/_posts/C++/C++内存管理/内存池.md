## 1. why？（背景）

有了new/delete，malloc/free，为什么要还要用内存池？

操作系统默认的内存管理函数的设计是<u>通用</u>的，为了维护通用性，会考虑许多情况下的内存分配方式，所以会有一些额外开销。而在具体的应用程序中，可以预先给应用程序一块适当大小的连续内存（内存池），然后<u>由应用程序自己来管理内存池</u>，仅当应用程序需要更多内存池时，才需要调用操作系统的内存分配函数。

## 2. what？（原理）

内存池是一块连续内存，可以分类为单线程内存池或多线程内存池，还可分类为固定内存池和可变内存池。

固定内存池原理图：

![QQ图片20220416112041](https://raw.githubusercontent.com/Vio1ette/blog-img/main/QQ%E5%9B%BE%E7%89%8720220416112041.jpg)

内存池头指针指向应用程序申请的第一块内存池，后续申请的内存池也由链表连接，内存池块的大小固定，每一块内存池块包含一个块头和一些内存单元，使用某一块内存池时，根据其块头信息，查询空闲的内存单元，然后返回空闲单元的地址。

内存池性能优化方面的优点：

- 针对特殊情况，可以摒弃通用的内存分配算法和多线程保护
- 一块内存池是连续的地址空间，所以增强了局部性
- 没有内存碎片的问题

## 3. how？（实现）

